{
   "$id": "strict/system+.json",
   "type": "object",
   "$schema": "http://json-schema.org/draft-07/schema#",
   "title": "FoundryVTT system.json & manifest+ (strict)",
   "allOf": [
      {
         "$id": "shared/properties/strict/system.json",
         "type": "object",
         "$schema": "http://json-schema.org/draft-07/schema#",
         "title": "FoundryVTT system.json (strict)",
         "allOf": [
            {
               "$id": "shared/properties/strict/base.json",
               "type": "object",
               "$schema": "http://json-schema.org/draft-07/schema#",
               "title": "FoundryVTT shared strict base between module & system.json",
               "definitions": {},
               "allOf": [
                  {
                     "$id": "shared/properties/common/base.json",
                     "type": "object",
                     "$schema": "http://json-schema.org/draft-07/schema#",
                     "title": "FoundryVTT shared base between module & system.json",
                     "definitions": {},
                     "required": [
                        "name",
                        "title",
                        "description",
                        "author",
                        "version",
                        "minimumCoreVersion"
                     ],
                     "properties": {
                        "title": {
                           "title": "A string value",
                           "default": "",
                           "examples": [
                              "A Module"
                           ],
                           "$id": "#/definitions/title",
                           "type": "string"
                        },
                        "description": {
                           "title": "A string value",
                           "default": "",
                           "examples": [
                              "Some description"
                           ],
                           "$id": "#/definitions/description",
                           "type": "string"
                        },
                        "author": {
                           "title": "A string value",
                           "default": "",
                           "examples": [
                              "typhonrt"
                           ],
                           "$id": "#/definitions/author",
                           "type": "string"
                        },
                        "dependencies": {
                           "title": "An array of items",
                           "items": {
                              "title": "An object value",
                              "required": [
                                 "name"
                              ],
                              "properties": {
                                 "name": {
                                    "title": "A string value",
                                    "default": "",
                                    "examples": [
                                       "dice-so-nice"
                                    ],
                                    "$id": "#/definitions/dependencies/items/properties/name",
                                    "type": "string"
                                 },
                                 "manifest": {
                                    "title": "A string value",
                                    "default": "",
                                    "examples": [
                                       "https://gitlab.com/riccisi/foundryvtt-dice-so-nice/raw/2.0.3/module/module.json"
                                    ],
                                    "$id": "#/definitions/dependencies/items/properties/manifest",
                                    "type": "string"
                                 },
                                 "type": {
                                    "title": "A string value",
                                    "default": "",
                                    "examples": [
                                       "module"
                                    ],
                                    "$id": "#/definitions/dependencies/items/properties/type",
                                    "type": "string",
                                    "enum": [
                                       "module",
                                       "system",
                                       "world"
                                    ],
                                    "errorMessage": "'type' should be one of the following strings: 'module', 'system', or 'world'"
                                 }
                              },
                              "$id": "#/definitions/dependencies/items",
                              "type": "object"
                           },
                           "$id": "#/definitions/dependencies",
                           "type": "array"
                        },
                        "authors": {
                           "title": "An array of items",
                           "items": {
                              "title": "An object value",
                              "required": [
                                 "name"
                              ],
                              "properties": {
                                 "name": {
                                    "title": "A string value",
                                    "default": "",
                                    "examples": [
                                       "Atropos"
                                    ],
                                    "$id": "#/definitions/authors/items/properties/name",
                                    "type": "string"
                                 },
                                 "email": {
                                    "title": "A string value",
                                    "default": "",
                                    "examples": [
                                       "admin@foundryvtt.com"
                                    ],
                                    "$id": "#/definitions/authors/items/properties/email",
                                    "type": "string"
                                 },
                                 "url": {
                                    "title": "A string value",
                                    "default": "",
                                    "examples": [
                                       "https://foundryvtt.com"
                                    ],
                                    "$id": "#/definitions/authors/items/properties/url",
                                    "type": "string"
                                 }
                              },
                              "$id": "#/definitions/authors/items",
                              "type": "object"
                           },
                           "$id": "#/definitions/authors",
                           "type": "array"
                        },
                        "socket": {
                           "title": "A boolean value",
                           "default": false,
                           "examples": [
                              true
                           ],
                           "$id": "#/definitions/socket",
                           "type": "boolean"
                        },
                        "license": {
                           "title": "A string value",
                           "default": "",
                           "examples": [
                              "LICENSE"
                           ],
                           "$id": "#/definitions/license",
                           "type": "string"
                        },
                        "readme": {
                           "title": "A string value",
                           "default": "",
                           "examples": [
                              "README.md"
                           ],
                           "$id": "#/definitions/readme",
                           "type": "string"
                        }
                     }
                  }
               ],
               "properties": {
                  "name": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "a-module"
                     ],
                     "type": "string",
                     "pattern": "^([a-z0-9]+-?)*[a-z0-9]+$",
                     "errorMessage": {
                        "pattern": "'name' should be a string that is lowercase alpha-numeric with only separating hyphens"
                     }
                  },
                  "version": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "1.0.0"
                     ],
                     "type": "string",
                     "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
                     "errorMessage": {
                        "pattern": "'version' should be a string that uses semantic versioning"
                     }
                  },
                  "minimumCoreVersion": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "0.7.5"
                     ],
                     "type": "string",
                     "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
                     "errorMessage": {
                        "pattern": "'minimumCoreVersion' should be a string that uses semantic versioning"
                     }
                  },
                  "compatibleCoreVersion": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "1.0.0"
                     ],
                     "type": "string",
                     "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
                     "errorMessage": {
                        "pattern": "'compatibleCoreVersion' should be a string that uses semantic versioning"
                     }
                  },
                  "esmodules": {
                     "title": "An array of items",
                     "items": {
                        "title": "A string value",
                        "default": "",
                        "examples": [
                           "index.js"
                        ],
                        "type": "string",
                        "pattern": "^(.+).js$"
                     },
                     "type": "array"
                  },
                  "scripts": {
                     "title": "An array of items",
                     "items": {
                        "title": "A string value",
                        "default": "",
                        "examples": [
                           "ascript.js"
                        ],
                        "type": "string",
                        "pattern": "^(.+).js$"
                     },
                     "type": "array"
                  },
                  "styles": {
                     "title": "An array of items",
                     "items": {
                        "title": "A string value",
                        "default": "",
                        "examples": [
                           "styles.css"
                        ],
                        "type": "string",
                        "pattern": "^(.+).css$"
                     },
                     "type": "array"
                  },
                  "languages": {
                     "$id": "#/definitions/languages",
                     "type": "array",
                     "title": "An array of items",
                     "items": {
                        "$id": "#/definitions/languages/items",
                        "type": "object",
                        "title": "An object value",
                        "required": [
                           "lang",
                           "name",
                           "path"
                        ],
                        "properties": {
                           "lang": {
                              "title": "A string value",
                              "default": "",
                              "examples": [
                                 "en"
                              ],
                              "$id": "#/definitions/languages/items/properties/lang",
                              "type": "string"
                           },
                           "name": {
                              "title": "A string value",
                              "default": "",
                              "examples": [
                                 "English"
                              ],
                              "$id": "#/definitions/languages/items/properties/name",
                              "type": "string"
                           },
                           "path": {
                              "$id": "#/definitions/languages/items/properties/path",
                              "title": "A string value",
                              "examples": [
                                 "lang/en.json"
                              ],
                              "type": "string",
                              "pattern": "^(.+).json$"
                           }
                        }
                     }
                  },
                  "url": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "https://someaddress.com/"
                     ],
                     "type": "string",
                     "pattern": "^(?:(?:(?:https?|ftp):)?//)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$",
                     "errorMessage": {
                        "pattern": "'url' should be a string and / or appears to be a malformed url"
                     }
                  },
                  "download": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "https://someaddress.com/module.zip"
                     ],
                     "type": "string",
                     "pattern": "^(?:(?:(?:https?|ftp):)?//)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?/(.+).zip$",
                     "errorMessage": {
                        "pattern": "'download' should be a string and / or appears to be a malformed url"
                     }
                  },
                  "bugs": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "https://github.com/some-user/a-module/issues"
                     ],
                     "type": "string",
                     "pattern": "^(?:(?:(?:https?|ftp):)?//)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$",
                     "errorMessage": {
                        "pattern": "'bugs' should be a string and / or appears to be a malformed url"
                     }
                  },
                  "changelog": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "https://github.com/some-user/a-module/releases"
                     ],
                     "type": "string",
                     "pattern": "^(?:(?:(?:https?|ftp):)?//)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$",
                     "errorMessage": {
                        "pattern": "'changelog' should be a string and / or appears to be a malformed url"
                     }
                  }
               }
            },
            {
               "$id": "shared/properties/common/system.json",
               "type": "object",
               "$schema": "http://json-schema.org/draft-07/schema#",
               "title": "FoundryVTT common properties for system.json",
               "properties": {
                  "templateVersion": {
                     "title": "An integer value",
                     "default": 0,
                     "examples": [
                        2
                     ],
                     "$id": "#/definitions/templateVersion",
                     "type": "integer"
                  },
                  "initiative": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "1d20"
                     ],
                     "$id": "#/definitions/initiative",
                     "type": "string"
                  },
                  "gridDistance": {
                     "title": "An integer value",
                     "default": 0,
                     "examples": [
                        5
                     ],
                     "$id": "#/definitions/gridDistance",
                     "type": "integer"
                  },
                  "gridUnits": {
                     "title": "A string value",
                     "default": "",
                     "examples": [
                        "ft, m"
                     ],
                     "$id": "#/definitions/gridUnits",
                     "type": "string"
                  },
                  "primaryTokenAttribute": {
                     "title": "A string value or null",
                     "default": "",
                     "examples": [
                        "resources.health"
                     ],
                     "$id": "#/definitions/primaryTokenAttribute",
                     "type": [
                        "null",
                        "string"
                     ]
                  },
                  "secondaryTokenAttribute": {
                     "title": "A string value or null",
                     "default": "",
                     "examples": [
                        "resources.power"
                     ],
                     "$id": "#/definitions/secondaryTokenAttribute",
                     "type": [
                        "null",
                        "string"
                     ]
                  }
               }
            }
         ],
         "properties": {
            "manifest": {
               "$id": "#/definitions/manifest",
               "title": "A string value",
               "default": "",
               "examples": [
                  "https://someaddress.com/system.json"
               ],
               "type": "string",
               "pattern": "^(?:(?:(?:https?|ftp):)?//)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?/system.json$",
               "errorMessage": {
                  "pattern": "'manifest' should be a string and / or appears to be a malformed url"
               }
            }
         }
      }
   ],
   "properties": {}
}